language: android
jdk: oraclejdk8
sudo: false

env:
  global:
    - ANDROID_API_LEVEL=22
    - ANDROID_BUILD_TOOLS_VERSION=24.0.2
    - ANDROID_ABI=default/x86_64

android:
   components:
       - platform-tools
       - tools
       - build-tools-$ANDROID_BUILD_TOOLS_VERSION
       - android-$ANDROID_API_LEVEL
       # For Google Maps API v1
       #- addon-google_apis-google-$ANDROID_API_LEVEL
       # Google Play Services
       #- extra-google-google_play_services
       # Support library
       - extra-android-support
       # Latest artifacts in local repository
       #- extra-google-m2repository
       - extra-android-m2repository
       # Specify at least one system image
       - sys-img-x86-android-$ANDROID_API_LEVEL
       #- sys-img-armeabi-v7a-addon-google_apis-google-$ANDROID_API_LEVEL

before_script:
   # Create and start emulator
   - echo no | android create avd --force -n test -t "android-$ANDROID_API_LEVEL" --abi "$ANDROID_ABI"
   - emulator -avd test -no-skin -no-audio -no-window &
   - android-wait-for-emulator
   - adb shell input keyevent 82 &

script: ./gradlew connectedAndroidTest